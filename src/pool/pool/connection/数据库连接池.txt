数据库连接池


数据库连接是一种关键的、有限的、昂贵的资源。对数据库连接的管理能显著影响整个应用程序的伸缩性和健壮性，影响到程序的性能指标，数据库连接池正是针对这个问题提出来的。

数据库连接池负责分配、管理和释放数据库连接，它允许应用程序重复使用一个现有的数据库连接，而不是重新建立一个；释放空闲时间超过最大空闲时间的数据库连接来避免因为没有释放连接而引起的连接遗漏，这项技术能明显提高对数据库操作的性能。


实现原理


数据库连接池基本的思想是在系统初始化的时候，将创建一定数量的数据库连接作为对象存储在内存中，这些数据库连接的数量是由最小数据库连接数来设定的。无论这些数据库连接是否被使用，连接池都将一直保证至少拥有这么多的连接数量。连接池的最大数据库连接数限定了这个连接池能占有的最大连接数。

当用户需要访问数据库时，并非建立一个新的连接，而是从连接池中取出一个已建立的空闲连接对象。使用完毕后，用户也并非将连接关闭，而是将连接放回到连接池中，以供下一个请求访问使用。当应用程序向连接池请求的连接数超过最大连接数时，这些请求将被加入到等待队列中。而连接的建立、断开都由连接池自身来管理。同时，还可以通过设置连接池的参数来控制连接池中的初始连接数、连接的上下限数以及每个连接的最大使用次数、最大空闲时间等等。也可以通过其自身的管理机制来监视数据库连接的数量、使用情况等。
